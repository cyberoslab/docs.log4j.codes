(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+MoC":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG"),i=(n("9wFs"),function(t){function e(e){var n=t.call(this)||this;return n.mapsConfig=e,n.SCRIPT_ID="appGoogleMapsApiScript",n.useCallBackToResolve="appGmapLoader",n}return r.c(e,t),e.prototype.isScriptLoaded=function(){return!!window.google&&!!window.google.maps},e.prototype.getScriptSrc=function(){var t=this.mapsConfig.gmap();return"https://maps.googleapis.com/maps/api/js?client="+t.client+"&v="+t.version+"&channel="+t.channel+"&libraries="+t.libraries+"&callback="+this.useCallBackToResolve},e}(n("0gYT").a))},"/rf6":function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){return void 0===n&&(n={}),r({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function l(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function d(t){return t%(2*Math.PI)*180/Math.PI}function m(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return p(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return i(t,e)}),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return o(t,e)}),n)},e.lineString=a,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return a(t,e)}),n)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=c,e.multiPolygon=p,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=l,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return d(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=d,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return l(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=m,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!m(t))throw new Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},"0Nby":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("VNr4"),i=n("F/XL"),o=n("67Y/"),a=n("LOCc"),s=n("x5KB"),u=n("CcnG"),c=n("CHF0"),p=n("1l6o"),l=function(){function t(t,e){this._appConfig=t,this._tenantConfigService=e}return t.prototype.getVehcileParkedImg=function(t){return Object(r.a)([Object(s.b)(this._getMapParkedPinSrc(t),a.a.size.map.marker.parked.bgW),Object(s.a)(t.thumbnailImage)]).pipe(Object(o.a)(function(t){var e=t[0],n=t[1],r=a.a.size.map.marker.parked.fgW/n.width;return e.getContext("2d").drawImage(n,(e.width-n.width*r)/2,a.a.size.map.marker.parked.fgTopOffset,n.width*r,n.height*r),e.toDataURL()}))},t.prototype.getVehicleDrivingIcon=function(){var t=this._tenantConfigService.getCurrentTenantConfig();return this._loadImgIntoDataURL("/assets/img/cars/driving/"+(t["css-name"]||"default")+".png",a.a.size.map.marker.driving.maxSize,a.a.size.map.marker.driving.maxSize)},t.prototype.getTripStartImg=function(){var t=this._tenantConfigService.getCurrentTenantConfig()["trip-start-img"];return/\.svg$/.test(t.img)?this._loadImgIntoDataURL(t.img,t.w,t.h):Object(i.a)(t.img)},t.prototype.getTripAccelerationImg=function(){return this._loadImgIntoDataURL(this._appConfig.vehicleTripEventAccelMarker,this._appConfig.vehicleTripEventAccelMarkerW)},t.prototype.getTripDecelerationImg=function(){return this._loadImgIntoDataURL(this._appConfig.vehicleTripEventDecelMarker,this._appConfig.vehicleTripEventDecelMarkerW)},t.prototype.getTripIdlingImg=function(){return this._loadImgIntoDataURL(this._appConfig.vehicleTripEventIdlingMarker,this._appConfig.vehicleTripEventIdlingMarkerW)},t.prototype._loadImgIntoDataURL=function(t,e,n){return Object(s.b)(t,e,n).pipe(Object(o.a)(function(t){return t.toDataURL()}))},t.prototype._getMapParkedPinSrc=function(t){return t.isOnline?"/assets/img/cars/pins-online/"+(this._tenantConfigService.getCurrentTenantConfig()["css-name"]||"default")+".svg":"/assets/img/cars/pins-online/offline.svg"},t.ngInjectableDef=u.defineInjectable({factory:function(){return new t(u.inject(c.a),u.inject(p.a))},token:t,providedIn:"root"}),t}()},"0gYT":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){this.async=!0,this.defer=!0}return t.prototype.load=function(){if(this.isScriptLoaded())return Promise.resolve();if(this.scriptLoadingPromise)return this.scriptLoadingPromise;var t=window.document.getElementById(this.SCRIPT_ID);if(t)return this._assignScriptLoadingPromise(t),this.scriptLoadingPromise;var e=window.document.createElement("script");return e.type="text/javascript",e.src=this.getScriptSrc(),e.id=this.SCRIPT_ID,e.async=this.async,e.defer=this.defer,this._assignScriptLoadingPromise(e),window.document.body.appendChild(e),this.scriptLoadingPromise},t.prototype._assignScriptLoadingPromise=function(t){var e=this;this.scriptLoadingPromise=new Promise(function(n,r){e.useCallBackToResolve?window[e.useCallBackToResolve]=function(){n()}:t.onload=function(){n()},t.onerror=function(t){r(t)}})},t}()},"5IrS":function(t,e,n){"use strict";function r(t,e){return t===e||t&&e&&t.lat===e.lat&&t.lng===e.lng}n.d(e,"a",function(){return r})},"8ml5":function(t,e,n){"use strict";var r=n("6blF"),i=n("F/XL"),o=n("15JJ"),a=n("67Y/"),s=n("x5KB");n.d(e,"a",function(){return u});var u=function(){function t(t){this.map=t,this.addedLayersIds=new Set,this.addedImages={},this._observersToDispose=new Set,this._isDisposed=!1}return t.prototype.addControl=function(t,e){return this.map.addControl(t,e),t},t.prototype.removeControl=function(t){this.map.removeControl(t)},t.prototype.getCenter=function(){return this.map.getCenter()},t.prototype.getZoom=function(){return this.map.getZoom()},t.prototype.getCanvas=function(){return this.map.getCanvas()},t.prototype.setCenter=function(t,e){this.map.setCenter(t,e)},t.prototype.setZoom=function(t,e){this.map.setZoom(t,e)},t.prototype.hasLayer=function(t){return!!this.map.getLayer(t)},t.prototype.addLayer=function(t,e){return this.map.addLayer(t,e),this.addedLayersIds.add(t.id),this},t.prototype.removeLayerWithSource=function(t){this.addedLayersIds.has(t)&&(this.map.removeLayer(t),this.map.removeSource(t),this.addedLayersIds.delete(t))},t.prototype.setLayoutProps=function(t,e){var n=this;Object.keys(e).forEach(function(r){return n.map.setLayoutProperty(t,r,e[r])})},t.prototype.loadImage=function(t){var e=this;return this._prepareImgUrl(t).pipe(Object(o.a)(function(){return r.a.create(function(n){e.map.loadImage(t,function(t,e){t?n.error(t):(n.next(e),n.complete())})})}))},t.prototype.loadAndAddImage=function(t,e){var n=this;return this.map.hasImage(e)?Object(i.a)(e):this.loadImage(t).pipe(Object(a.a)(function(t){return n.addImage(e,t),e}))},t.prototype.hasImage=function(t){return this.map.hasImage(t)},t.prototype.addImage=function(t,e,n){return this.map.hasImage(t)||this.map.addImage(t,e,n),this.addedImages[t]=e,this},t.prototype.fitToBounds=function(t,e){t.isEmpty()||this.map.fitBounds([t.getSouthWest(),t.getNorthEast()],e)},t.prototype.fitToContent=function(t){if(!this.getContentBounds().isEmpty()){var e=this.getContentBounds();this.fitToBounds(e,t)}},t.prototype.getContentBounds=function(){return t=this.map,e=Array.from(this.addedLayersIds),n=t.getStyle().sources,r=e.filter(function(t){return n[t]}).map(function(t){return n[t]}).map(function(t){return function t(e){switch(e.type){case"geojson":return t(e.data);case"FeatureCollection":return e.features.map(function(e){return t(e)}).reduce(function(t,e){return t.concat(e)},[]);case"Feature":return t(e.geometry);case"Point":return[e.coordinates];case"LineString":return e.coordinates;default:return[]}}(t)}).reduce(function(t,e){return t.concat(e)},[]),i=new mapboxgl.LngLatBounds,r.forEach(function(t){return i.extend(t)}),i;var t,e,n,r,i},t.prototype.copyContentFrom=function(t){var e=this;Object.keys(t.addedImages).forEach(function(n){return e.addImage(n,t.addedImages[n])}),this.map.setStyle(t.map.getStyle())},t.prototype.getAddedLayersIds=function(t){var e=Array.from(this.addedLayersIds);if(!t)return e;var n=new RegExp("^"+t);return e.filter(function(t){return n.test(t)})},t.prototype.on=function(t){var e=this;return r.a.create(function(n){e._observersToDispose.add(n),e.map.on(t,function(t){return n.next(t)})})},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.dispose=function(){Array.from(this._observersToDispose).forEach(function(t){return t.complete()}),this._observersToDispose=null,this.addedImages=null,this.addedLayersIds=null,this._isDisposed=!0,this.map.remove()},t.prototype._prepareImgUrl=function(t){return/\.svg$/.test(t)?Object(s.b)(t).pipe(Object(a.a)(function(t){return t.toDataURL()})):Object(i.a)(t)},t}()},"9wFs":function(t,e,n){"use strict";n("kVKH");var r=n("G0XU");n.d(e,"a",function(){return r.a})},AIIW:function(t,e,n){"use strict";var r=n("CcnG"),i=n("Ip0R"),o=(n("9wFs"),n("8ml5")),a=n("mrSG"),s=n("0gYT"),u=n("G0XU"),c=function(t){function e(e){var n=t.call(this)||this;return n.mapsConfig=e,n.SCRIPT_ID="appMapBoxGLScript",n.STYLE_ID="appMapBoxGLCSS",n}return a.c(e,t),e.prototype.load=function(){return this.loadStyles(),t.prototype.load.call(this)},e.prototype.loadStyles=function(){if(!window.document.getElementById(this.STYLE_ID)){var t=this.mapsConfig.mapbox().version,e=document.createElement("link");e.id=this.STYLE_ID,e.rel="stylesheet",e.href="https://api.tiles.mapbox.com/mapbox-gl-js/v"+t+"/mapbox-gl.css",window.document.getElementsByTagName("head")[0].appendChild(e)}},e.prototype.isScriptLoaded=function(){return!!window.mapboxgl},e.prototype.getScriptSrc=function(){return"https://api.tiles.mapbox.com/mapbox-gl-js/v"+this.mapsConfig.mapbox().version+"/mapbox-gl.js"},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e(r.inject(u.a))},token:e,providedIn:"root"}),e}(s.a),p=n("PK9H"),l=function(){function t(t,e,n,i){this._zone=t,this._mapDriver=e,this._mbLoader=n,this._mapsConfig=i,this.dragend=new r.EventEmitter,this.mapClick=new r.EventEmitter,this.load=new r.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;this.mapInstance||this._mbLoader.load().then(function(){t._initialize()})},t.prototype.ngOnChanges=function(t){this._mapDriver.isInited&&(t.center&&this.center&&this._mapDriver.setCenter(this.center),t.zoom&&this.zoom&&this._mapDriver.setZoom(this.zoom))},t.prototype.ngOnDestroy=function(){this.wrappedMap&&(this.wrappedMap.dispose(),this.wrappedMap=null)},t.prototype.handleMapLoad=function(t){this.wrappedMap=new o.a(t),this.load.emit(this.wrappedMap)},t.prototype.handleMapClick=function(t){t.lngLat&&this.mapClick.emit({map:this.wrappedMap,event:t})},t.prototype._initialize=function(){var t=this,e=this._mapsConfig.mapbox(),n=e.style,r=e.defaultCenter,i=e.defaultZoom;mapboxgl.accessToken=e.accessToken,this._zone.runOutsideAngular(function(){var e=new mapboxgl.Map({container:t.mapContainer.nativeElement,style:n,center:t.center||[r.lng,r.lat],zoom:t.zoom||i,interactive:t.interactive});t.mapInstance=e,t._initMapEvents(e)})},t.prototype._initMapEvents=function(t){var e=this;t.on("load",function(){e.wrappedMap=new o.a(t),e._zone.run(function(){return e.load.emit(e.wrappedMap)})}).on("click",function(t){return e._zone.run(function(){t.lngLat&&e.mapClick.emit({map:e.wrappedMap,event:t})})}).on("moveend",function(t){return e._zone.run(function(){return e.dragend.emit(t)})})},t}(),h=r["\u0275crt"]({encapsulation:0,styles:["[_nghost-%COMP%] {\n      display: block;\n    }\n    div[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\n      height: 100%;\n      width: 100%;\n    }"],data:{}});function d(t){return r["\u0275vid"](0,[r["\u0275qud"](402653184,1,{mapContainer:0}),(t()(),r["\u0275eld"](1,0,null,null,2,"div",[],null,null,null,null,null)),r["\u0275did"](2,278528,null,0,i.NgClass,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngClass:[0,"ngClass"]},null),(t()(),r["\u0275eld"](3,0,[[1,0],["container",1]],null,0,"div",[],null,null,null,null,null))],function(t,e){t(e,2,0,e.component.className)},null)}var m=n("+MoC"),f=n("wImt"),g=n("5IrS"),v=n("xPra"),y=function(){function t(t,e,n,i,o){this._el=t,this._zone=e,this._mapDriver=n,this._gmapLoader=i,this._mapsConfiguration=o,this.interaction=!0,this.load=new r.EventEmitter,this.mapClick=new r.EventEmitter,this.dragend=new r.EventEmitter,this._eventListeners=[]}return t.prototype.ngOnInit=function(){var t=this;this.map||this._gmapLoader.load().then(function(){t.initialize()})},t.prototype.ngOnChanges=function(t){this._mapDriver.isInited&&(t.center&&this.center&&(this.animation&&t.center.previousValue?this._panTo(t.center.previousValue,t.center.currentValue):(this._animationExecutor&&this._animationExecutor.stopAnimation(),this._mapDriver.setCenter(this.center))),t.zoom&&this.zoom&&this._mapDriver.setZoom(this.zoom))},t.prototype.ngOnDestroy=function(){this._eventListeners.forEach(function(t){return google.maps.event.removeListener(t)}),this._eventListeners=null,this._animationExecutor&&(this._animationExecutor.stopAnimation(),this._animationExecutor=null)},t.prototype._panTo=function(t,e){var n=this;Object(g.a)(t,e)?this._mapDriver.setCenter(e):this._getAnimExecutor().startAnimation(function(r){n._mapDriver.setCenter(Object(v.a)(t,e,r,n._mapDriver,v.b))})},t.prototype._getAnimExecutor=function(){return this._animationExecutor||(this._animationExecutor=new f.a),this._animationExecutor},t.prototype.initialize=function(){var t=this,e=this._mapsConfiguration.gmap();this._zone.runOutsideAngular(function(){t.map=new google.maps.Map(t._el.nativeElement.children[0],a.a({center:t.center||e.defaultCenter,zoom:t.zoom||e.defaultZoom},e.options,t.options,{gestureHandling:t.interaction?"auto":"none",clickableIcons:t.interaction,styles:e.styles,minZoom:e.minZoom})),t._initEvents(t.map)}),this.load.emit(this.map)},t.prototype._initEvents=function(t){var e=this;this._eventListeners.push(t.addListener("click",function(t){e._zone.run(function(){e.mapClick.emit(t)})})),this._eventListeners.push(t.addListener("dragend",function(t){e._zone.run(function(){e.dragend.emit(t)})}))},t}(),_=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function w(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,0,"div",[],[[8,"className",0]],null,null,null,null))],null,function(t,e){t(e,0,0,e.component.className)})}n("B7Lh"),n("JsDN"),n("KDJi"),n("IXP5"),n("xvOT"),n("FMkC"),n("Wmu6"),n("Y8qE"),n("m9cR"),n.d(e,"a",function(){return b}),n.d(e,"b",function(){return I});var b=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function C(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-mapbox-map",[],null,[[null,"load"],[null,"mapClick"],[null,"dragend"]],function(t,e,n){var r=!0,i=t.component;return"load"===e&&(r=!1!==i.handleMapLoad(n)&&r),"mapClick"===e&&(r=!1!==i.handleMapClick(n)&&r),"dragend"===e&&(r=!1!==i.dragend.emit(i.mapDriver)&&r),r},d,h)),r["\u0275did"](1,770048,null,0,l,[r.NgZone,p.a,c,u.a],{className:[0,"className"],center:[1,"center"],zoom:[2,"zoom"],interactive:[3,"interactive"]},{dragend:"dragend",mapClick:"mapClick",load:"load"})],function(t,e){var n=e.component;t(e,1,0,n.className,n.center,n.zoom,n.interaction)},null)}function L(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-google-maps",[],null,[[null,"load"],[null,"mapClick"],[null,"dragend"]],function(t,e,n){var r=!0,i=t.component;return"load"===e&&(r=!1!==i.handleMapLoad(n)&&r),"mapClick"===e&&(r=!1!==i.handleMapClick(n)&&r),"dragend"===e&&(r=!1!==i.dragend.emit(i.mapDriver)&&r),r},w,_)),r["\u0275did"](1,770048,null,0,y,[r.ElementRef,r.NgZone,p.a,m.a,u.a],{center:[0,"center"],zoom:[1,"zoom"],className:[2,"className"],interaction:[3,"interaction"],animation:[4,"animation"]},{load:"load",mapClick:"mapClick",dragend:"dragend"})],function(t,e){var n=e.component;t(e,1,0,n.center,n.zoom,n.className,n.interaction,n.animation)},null)}function I(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](16777216,null,null,1,null,C)),r["\u0275did"](1,16384,null,0,i.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,L)),r["\u0275did"](3,16384,null,0,i.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,"mapbox"===n.driverName),t(e,3,0,"google"===n.driverName)},null)}},AKIq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("/rf6");e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},B4gM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("LOCc"),i=function(){function t(t,e){this._appConfig=t,this._ref=e,this._subscribe()}return t.prototype.transform=function(t,e){return this._appConfig.getMeasuringSystem().getValue()===r.a.MEASURING_SYSTEM.IMPERIAL?void 0!==e?e:"":t},t.prototype.ngOnDestroy=function(){this._subs&&this._subs.unsubscribe()},t.prototype._subscribe=function(){var t=this;this._subs=this._appConfig.getMeasuringSystem().subscribe(function(e){e&&t._ref.markForCheck()})},t}()},B7Lh:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){var t=this;this._managerStorageMap={},this._mapLoadedPromise=new Promise(function(e){t._resoveMapLoadedFn=e})}return t.prototype.loadingFinised=function(){this._resoveMapLoadedFn(!0)},t.prototype.whenMapLoaded=function(){return this._mapLoadedPromise},t.prototype.setManager=function(t,e){this._managerStorageMap[t]=e},t.prototype.getManager=function(t){return this._managerStorageMap[t]},t}()},FMkC:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n("CcnG"),n("9wFs"),n("PK9H"),n("JsDN"),n("IXP5");var r=n("acRK"),i=n("p5j7");function o(t,e,n,o){switch(e.getDriverName()){case"google":return new r.a(t,n,o);case"mapbox":return new i.a(t,n);default:throw new Error('Unsuported map driver "'+e.getDriverName()+'"')}}},GWfa:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("CcnG"),i=(n("JsDN"),n("xPra")),o=n("5IrS"),a=(n("PK9H"),n("wImt")),s=function(){function t(t,e){this._markerDriver=t,this._mapDriver=e,this.anchor="center",this.rotation=0,this.click=new r.EventEmitter,this.holder=null}return t.prototype.ngOnInit=function(){var t=this;this._markerDriver.whenInited().then(function(){t.holder=t._markerDriver.addMarker({img:t.img,latLng:t.latLng,anchor:t.anchor,title:t.title,rotation:t.rotation},{click:function(){return t.click.emit()}})})},t.prototype.ngOnDestroy=function(){this.holder&&(this._markerDriver.remove(this.holder),this.holder=null),this._animationExecutor&&(this._animationExecutor.stopAnimation(),this._animationExecutor=null)},t.prototype.ngOnChanges=function(t){this._markerDriver.isInited&&this.holder&&(t.latLng||t.title||t.img||t.anchor||t.rotation)&&(this._animationExecutor&&this._animationExecutor.stopAnimation(),!this.animation||!t.rotation&&Object(o.a)(this.holder.config.latLng,this.latLng)?this.holder=this._markerDriver.updateMarker(this.holder,{img:this.img,latLng:this.latLng,anchor:this.anchor,title:this.title,rotation:this.rotation}):this._updateWithAnimation())},t.prototype._getAnimExecutor=function(){return this._animationExecutor||(this._animationExecutor=new a.a),this._animationExecutor},t.prototype._updateWithAnimation=function(){var t=this,e=this.holder.config;this._getAnimExecutor().startAnimation(function(n){var r=e.rotation===t.rotation&&t.rotation||Object(i.b)(e.rotation,t.rotation,n);t.holder=t._markerDriver.updateMarker(t.holder,{img:t.img,latLng:Object(i.a)(e.latLng,t.latLng,n,t._mapDriver,i.b),anchor:t.anchor,title:t.title,rotation:r})})},t}()},IXP5:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.c(e,t),e}(n("o0t+").a)},JsDN:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.c(e,t),e}(n("o0t+").a)},KDJi:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n("CcnG"),n("9wFs"),n("JsDN");var r=n("acRK"),i=n("p5j7");function o(t,e){switch(e.getDriverName()){case"google":return new r.b(t);case"mapbox":return new i.b(t);default:throw new Error('Unsuported marker driver "'+e.getDriverName()+'"')}}},"Mu+0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Yeox"),i=n("/rf6");e.default=function(t,e,n){void 0===n&&(n={});for(var o=n.steps||64,a=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},s=[],u=0;u<o;u++)s.push(r.default(t,e,-360*u/o,n).geometry.coordinates);return s.push(s[0]),i.polygon([s],a)}},PK9H:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.c(e,t),e}(n("o0t+").a)},PgCX:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return function(){}}()},UEtB:function(t,e,n){"use strict";var r={};function i(t){return Math.floor(Math.abs(t)+.5)*(t>=0?1:-1)}function o(t,e,n){var r=(t=i(t*n))-(e=i(e*n));r<<=1,t-e<0&&(r=~r);for(var o="";r>=32;)o+=String.fromCharCode(63+(32|31&r)),r>>=5;return o+String.fromCharCode(r+63)}function a(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice().reverse());return e}r.decode=function(t,e){for(var n,r=0,i=0,o=0,a=[],s=0,u=0,c=null,p=Math.pow(10,e||5);r<t.length;){c=null,s=0,u=0;do{u|=(31&(c=t.charCodeAt(r++)-63))<<s,s+=5}while(c>=32);n=1&u?~(u>>1):u>>1,s=u=0;do{u|=(31&(c=t.charCodeAt(r++)-63))<<s,s+=5}while(c>=32);a.push([(i+=n)/p,(o+=1&u?~(u>>1):u>>1)/p])}return a},r.encode=function(t,e){if(!t.length)return"";for(var n=Math.pow(10,e||5),r=o(t[0][0],0,n)+o(t[0][1],0,n),i=1;i<t.length;i++){var a=t[i],s=t[i-1];r+=o(a[0],s[0],n),r+=o(a[1],s[1],n)}return r},r.fromGeoJSON=function(t,e){if(t&&"Feature"===t.type&&(t=t.geometry),!t||"LineString"!==t.type)throw new Error("Input must be a GeoJSON LineString");return r.encode(a(t.coordinates),e)},r.toGeoJSON=function(t,e){return{type:"LineString",coordinates:a(r.decode(t,e))}},t.exports&&(t.exports=r)},UgwL:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("LOCc"),i=n("+JjY"),o=function(){function t(t,e){this._ref=t,this._appConfig=e,this._subscribe()}return t.prototype.transform=function(t,e){return this._appConfig.getMeasuringSystem().getValue()===r.a.MEASURING_SYSTEM.IMPERIAL?this._toImperialValue(t,e):this._toMetricValue(t,e)},t.prototype.ngOnDestroy=function(){this._subs&&this._subs.unsubscribe()},t.prototype._toMetricValue=function(t,e){switch(e){case"distance":return Object(i.i)(t);case"fuelEfficiency":case"speed":return t;default:throw new Error("Unknown transform type: "+e)}},t.prototype._toImperialValue=function(t,e){switch(e){case"distance":return Object(i.j)(t);case"fuelEfficiency":return Object(i.h)(t);case"speed":return Object(i.g)(t);default:throw new Error("Unknown transform type: "+e)}},t.prototype._subscribe=function(){var t=this;this._subs=this._appConfig.getMeasuringSystem().subscribe(function(e){e&&t._ref.markForCheck()})},t}()},"VQd/":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("AbPr");var r=function(){function t(t,e,n){this._ref=t,this._translate=e,this._dateformat=n,this._prevValue=null,this._prevLang=null,this._prevFormat=null,this._lastResult=null}return t.prototype.transform=function(t,e){return void 0===e&&(e="@date"),t===this._prevValue&&e===this._prevFormat&&this._translate.currentLang===this._prevLang?this._lastResult:(this._subscribeToListenLangChange(),this._prevValue=t,this._prevFormat=e,this._prevLang=this._translate.currentLang,this._lastResult=this._dateformat.formatDate(t,e),this._lastResult)},t.prototype.ngOnDestroy=function(){this._langChangeSubs&&this._langChangeSubs.unsubscribe(),this._langChangeSubs=null},t.prototype._subscribeToListenLangChange=function(){var t=this;this._langChangeSubs||(this._langChangeSubs=this._translate.onLangChange.subscribe(function(e){t._ref.markForCheck()}))},t}()},Wmu6:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.c(e,t),e}(n("o0t+").a)},"Xv+2":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("IXP5");var r=function(){function t(t){this._polylineDriver=t,this.width=4,this.opacity=.8}return t.prototype.ngOnInit=function(){var t=this;this._polylineDriver.whenInited().then(function(){t._polyline=t._polylineDriver.addPolyline({encoded:t.encoded,color:t.color,width:t.width,opacity:t.opacity})})},t.prototype.ngOnChanges=function(t){this._polyline&&t.encoded&&this._polylineDriver.setEncoded(this._polyline,t.encoded.currentValue)},t.prototype.ngOnDestroy=function(){this._polylineDriver.remove(this._polyline),this._polyline=null},t}()},Y8qE:function(t,e,n){"use strict";n("CcnG"),n("9wFs");var r=n("Wmu6"),i=n("mrSG"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.c(e,t),e.prototype.add=function(t){var e=t.fillOpacity;return new google.maps.Circle({map:this.map,center:t.center,fillColor:t.fillColor,fillOpacity:void 0===e?.3:e,strokeWeight:0,radius:t.radius})},e.prototype.remove=function(t){t.setMap(null)},e}(r.a),a=n("Mu+0"),s=n.n(a),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nextItemId=0,e}return i.c(e,t),e.prototype.add=function(t){var e=t.title,n=t.center,r=t.radius,i=t.fillColor,o=t.fillOpacity,a=void 0===o?.3:o,u="app-geofence-"+this._nextItemId++;return this._mapWrapper.addLayer({id:u,type:"fill",source:{type:"geojson",data:s()([n.lng,n.lat],r,{units:"meters",properties:{title:e}})},paint:{"fill-color":i,"fill-opacity":a}}),u},e.prototype.remove=function(t){this.map&&!this._mapWrapper.isDisposed()&&this._mapWrapper.removeLayerWithSource(t)},Object.defineProperty(e.prototype,"_mapWrapper",{get:function(){return this.map},enumerable:!0,configurable:!0}),e}(r.a);function c(t,e){switch(e.getDriverName()){case"google":return new o(t);case"mapbox":return new u(t);default:throw new Error('Unsuported map driver "'+e.getDriverName()+'"')}}n.d(e,"a",function(){return c})},Yeox:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("/rf6"),i=n("AKIq");e.default=function(t,e,n,o){void 0===o&&(o={});var a=i.getCoord(t),s=r.degreesToRadians(a[0]),u=r.degreesToRadians(a[1]),c=r.degreesToRadians(n),p=r.lengthToRadians(e,o.units),l=Math.asin(Math.sin(u)*Math.cos(p)+Math.cos(u)*Math.sin(p)*Math.cos(c)),h=s+Math.atan2(Math.sin(c)*Math.sin(p)*Math.cos(u),Math.cos(p)-Math.sin(u)*Math.sin(l)),d=r.radiansToDegrees(h),m=r.radiansToDegrees(l);return r.point([d,m],o.properties)}},acRK:function(t,e,n){"use strict";n("o52G");var r=n("mrSG"),i=n("JsDN"),o=n("x5KB"),a=n("5IrS"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._markersSet=new Set,e._markerListenersMap=new WeakMap,e}return r.c(e,t),e.prototype.addMarker=function(t,e){var n=this,r=t.img,i=t.latLng,o=t.title,a=void 0===o?"":o,s=t.anchor,u=void 0===s?"center":s,c=t.rotation,p=void 0===c?0:c,l=e.click,h=new google.maps.Marker({title:a,position:i||{lat:0,lng:0},map:this.map,visible:!!i&&!!r});return this._markerListenersMap.set(h,h.addListener("click",function(){n.zone.run(function(){l(h)})})),r&&this._setImgWithAnhor(h,r,u,p),i&&this._markersSet.add(h),{native:h,config:{img:r,latLng:i,title:a,anchor:u,rotation:p}}},e.prototype.updateMarker=function(t,e){var n=t.config,r=t.native,i=e.img,o=e.latLng,s=e.title,u=void 0===s?"":s,c=e.anchor,p=void 0===c?"center":c,l=e.rotation,h=void 0===l?0:l;return o&&!Object(a.a)(n.latLng,o)&&(r.setPosition(o),this._markersSet.add(r)),n.title!==u&&r.setTitle(u),!i||n.img===i&&n.anchor===p&&n.rotation===h||this._setImgWithAnhor(r,i,p,h),r.getVisible()||r.setVisible(!0),i&&o?r.getMap()||r.setMap(this.map):r.setMap(null),{native:r,config:{img:i,latLng:o,title:u,anchor:p,rotation:h}}},e.prototype.remove=function(t){t.native.setMap(null),google.maps.event.removeListener(this._markerListenersMap.get(t.native)),this._markerListenersMap.delete(t.native),this._markersSet.delete(t.native),t.config=null,t.native=null},e.prototype.getContentBounds=function(){var t=new google.maps.LatLngBounds;return this._markersSet.forEach(function(e){t.extend(e.getPosition())}),t},e.prototype.getItems=function(){return Array.from(this._markersSet)},e.prototype._setImgWithAnhor=function(t,e,n,r){"bottom"!==n||r?Object(o.b)(e,null,null,r).subscribe(function(e){t.setIcon({url:e.toDataURL("image/png"),anchor:new google.maps.Point(e.width/2,e.height/2)})}):t.setIcon(e)},e}(i.a),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._polylinesList=new Set,e}return r.c(e,t),e.prototype.addPolyline=function(t){var e=t.color,n=t.width,r=t.opacity,i=new google.maps.Polyline({path:this._getPathFromEncoded(t.encoded),geodesic:!0,strokeColor:e,strokeOpacity:r,strokeWeight:n,map:this.map});return this._polylinesList.add(i),i},e.prototype.setEncoded=function(t,e){return t.setPath(this._getPathFromEncoded(e)),this},e.prototype.remove=function(t){t.setMap(null),this._polylinesList.delete(t)},e.prototype.getContentBounds=function(){var t=new google.maps.LatLngBounds;return this._polylinesList.forEach(function(e){e.getPath().getArray().forEach(function(e){t.extend(e)})}),t},e.prototype.getItems=function(){return Array.from(this._polylinesList)},e.prototype._getPathFromEncoded=function(t){return t&&google.maps.geometry.encoding.decodePath(t)||[]},e}(n("IXP5").a);function c(t){return t instanceof google.maps.Marker?new google.maps.Marker(p(["position","title","icon","zIndex"],t)):t instanceof google.maps.Polyline?new google.maps.Polyline(p(["path","geodesic","strokeColor","strokeOpacity","strokeWeight","zIndex"],t)):void 0}function p(t,e){return t.reduce(function(t,n){var i;return r.a({},t,((i={})[n]=function(t,e){switch(t){case"path":return e.getPath();default:return e[t]}}(n,e),i))},{})}var l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i._markerDriver=n,i._polylineDriver=r,i}return r.c(e,t),e.prototype.fitToContent=function(t){var e=this._getContentBounds();if(e&&!e.isEmpty()){var n=this.map;t&&t.maxZoom&&google.maps.event.addDomListenerOnce(n,"bounds_changed",function(){n.getZoom()>t.maxZoom&&n.setZoom(t.maxZoom)}),n.fitBounds(e)}},e.prototype.getCenter=function(){var t=this._map.getCenter();return{lat:t.lat(),lng:t.lng()}},e.prototype.getZoom=function(){return this._map.getZoom()},e.prototype.showZoomControl=function(){return this._map.setOptions({zoomControl:!0}),this},e.prototype.hideZoomControl=function(){return this._map.setOptions({zoomControl:!1}),this},e.prototype.setCenter=function(t){return this._map.setCenter(t),this},e.prototype.setZoom=function(t){return this._map.setZoom(t),this},e.prototype.showContentFromHolder=function(t,e){var n,r=this,i=t.bounds;void 0===e&&(e=!0),(n=t.items,n.map(c)).forEach(function(t){return t.setMap(r._map)}),e&&i&&this._map.fitBounds(i)},e.prototype.getContentHolder=function(){return{items:this._polylineDriver.getItems().concat(this._markerDriver.getItems()),bounds:this._getContentBounds()}},e.prototype.fromLatLngToPoint=function(t){var e=t.lat,n=t.lng;return this.map.getProjection().fromLatLngToPoint(new google.maps.LatLng(e,n))},e.prototype.fromPointToLatLng=function(t){var e=t.x,n=t.y,r=this.map.getProjection().fromPointToLatLng(new google.maps.Point(e,n));return{lat:r.lat(),lng:r.lng()}},e.prototype._getContentBounds=function(){var t=new google.maps.LatLngBounds;return[this._markerDriver.getContentBounds(),this._polylineDriver.getContentBounds()].filter(function(t){return!t.isEmpty()}).forEach(function(e){return t.extend(e.getNorthEast()).extend(e.getSouthWest())}),t},Object.defineProperty(e.prototype,"_map",{get:function(){return this.map},enumerable:!0,configurable:!0}),e}(n("PK9H").a);n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"a",function(){return l})},m9cR:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("CcnG"),i=(n("9wFs"),n("JsDN"),n("IXP5"),n("PK9H"),n("Wmu6"),function(){function t(t,e,n,i,o){this.mapDriver=t,this._mapsConfiguration=e,this._markerDriver=n,this._polylineDriver=i,this._circleDriver=o,this.interaction=!0,this.load=new r.EventEmitter,this.dragend=new r.EventEmitter,this.mapClick=new r.EventEmitter}return t.prototype.ngOnInit=function(){this.defaults=this._mapsConfiguration.getDefaults(),this.driverName=this._mapsConfiguration.getDriverName()},t.prototype.ngOnDestroy=function(){this._markerDriver.dispose(),this._polylineDriver.dispose(),this.mapDriver.dispose()},t.prototype.handleMapLoad=function(t){this._markerDriver.initWithMap(t),this._polylineDriver.initWithMap(t),this._circleDriver.initWithMap(t),this.mapDriver.initWithMap(t),this.load.emit(this.mapDriver)},t.prototype.handleMapClick=function(){this.mapClick.emit(this.mapDriver)},t.prototype._onMouseWheelChrome=function(t){this._handleMouseWheel(t)},t.prototype._onMouseWheelFirefox=function(t){this._handleMouseWheel(t)},t.prototype._handleMouseWheel=function(t){this.interaction&&(t.preventDefault(),t.stopPropagation(),t.returnValue=!1)},t}())},"o0t+":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(t){var e=this;this.zone=t,this.isDisposed=!1,this._initPromise=new Promise(function(t,n){e._initPromiseResolveFn=t,e._initPromiseRejectFn=n})}return t.prototype.initWithMap=function(t){if(this.isDisposed)return this._initPromiseRejectFn("Driver is disposed");this.map=t,this.onSetMap(t),this._initPromiseResolveFn()},t.prototype.whenInited=function(){return this._initPromise},t.prototype.dispose=function(){this.isDisposed=!0},t.prototype.onSetMap=function(t){},Object.defineProperty(t.prototype,"isInited",{get:function(){return!!this.map},enumerable:!0,configurable:!0}),t}()},o52G:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return function(){}}()},p5j7:function(t,e,n){"use strict";n("PgCX"),n("8ml5");var r=n("mrSG"),i=n("PK9H"),o={top:60,bottom:30,right:30,left:30},a=function(t){function e(e,n){var r=t.call(this,e)||this;return r._markerDriver=n,r}return r.c(e,t),e.prototype.fitToContent=function(t){var e=this._mapWrapper.getContentBounds(),n=this._markerDriver.getContentBounds();n&&e.extend(n);var r={animate:!1,padding:o};t&&t.maxZoom&&(r.maxZoom=t.maxZoom),this._mapWrapper.fitToBounds(e,r)},e.prototype.getCenter=function(){return this._mapWrapper.getCenter()},e.prototype.getZoom=function(){return this._mapWrapper.getZoom()},e.prototype.setCenter=function(t){return this._mapWrapper.setCenter([t.lng,t.lat]),this},e.prototype.setZoom=function(t){return this._mapWrapper.setZoom(t),this},e.prototype.showZoomControl=function(){return!this._zoomControl&&this.isInited&&(this._zoomControl=this._mapWrapper.addControl(new mapboxgl.NavigationControl({showCompass:!1}),"bottom-right")),this},e.prototype.hideZoomControl=function(){return this._zoomControl&&!this.isDisposed&&this._mapWrapper.removeControl(this._zoomControl),this},e.prototype.showContentFromHolder=function(t,e){void 0===e&&(e=!0),this._mapWrapper.copyContentFrom(t),e&&this._mapWrapper.fitToBounds(t.getContentBounds(),{animate:!1,padding:o})},e.prototype.getContentHolder=function(){return this._mapWrapper},e.prototype.onSetMap=function(t){t.on("mousemove").subscribe(function(e){var n=t.map.queryRenderedFeatures(e.point,{layers:t.getAddedLayersIds()}).filter(function(t){return t.properties.title});n.length?(t.map.getCanvas().setAttribute("title",n[0].properties.title),t.map.getCanvas().style.cursor="pointer"):(t.map.getCanvas().setAttribute("title",""),t.map.getCanvas().style.cursor="")})},e.prototype.fromLatLngToPoint=function(t){return this._mapWrapper.map.project(t)},e.prototype.fromPointToLatLng=function(t){return this._mapWrapper.map.unproject([t.x,t.y])},Object.defineProperty(e.prototype,"_mapWrapper",{get:function(){return this.map},enumerable:!0,configurable:!0}),e}(i.a),s=n("/rf6"),u=n("UEtB");function c(t,e){return void 0===e&&(e={}),function(t,e){return void 0===t&&(t=[]),void 0===e&&(e={}),{type:"Feature",geometry:{type:"LineString",coordinates:t},properties:e}}(function(t,e){return t?Object(u.decode)(t,void 0).map(function(t){return t.reverse()}):[]}(t),e)}var p=n("JsDN"),l=n("5IrS");function h(t){var e,n,r=0;if(0===t.length)return r.toString();for(e=0,n=t.length;e<n;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return r.toString()}var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nextMarkerId=0,e._markerPointsMap=new Map,e._markerSubsMap=new Map,e}return r.c(e,t),e.prototype.addMarker=function(t,e){var n=e.click,r="app-map-marker-"+this._nextMarkerId++;t.latLng&&t.img&&this._addLayer(r,t);var i=this._getMapWrapper(),o=i.on("click").subscribe(function(t){(i.hasLayer(r)&&i.map.queryRenderedFeatures(t.point,{layers:[r]})||[]).length&&n(r)});return this._markerSubsMap.set(r,o),{config:t,native:r}},e.prototype.updateMarker=function(t,e){var n=this,i=t.native,o=t.config,a=o.title,u=o.latLng,c=o.anchor,p=o.rotation,d=o.img;if(e.latLng?this._markerPointsMap.set(i,u):this._markerPointsMap.delete(i),this._getMapWrapper().hasLayer(i))if(e.img&&e.latLng){if(!Object(l.a)(e.latLng,u)||e.title!==a){var m=this._getMapWrapper().map.getSource(i);m&&m.setData(Object(s.point)([e.latLng.lng,e.latLng.lat],r.a({},m._data.properties,{title:e.title})))}e.anchor===c&&e.rotation===p||e.img!==d?e.img!==d&&this._getMapWrapper().loadAndAddImage(e.img,h(e.img)).subscribe(function(t){n._getMapWrapper().setLayoutProps(i,{"icon-image":t,"icon-anchor":e.anchor,"icon-rotate":e.rotation})}):this._getMapWrapper().setLayoutProps(i,{"icon-anchor":e.anchor,"icon-rotate":e.rotation})}else this._getMapWrapper().removeLayerWithSource(i);else this._addLayer(i,e);return{native:i,config:e}},e.prototype.remove=function(t){var e=t.native;this._markerPointsMap.delete(e),this._markerSubsMap.get(e).unsubscribe(),this._markerSubsMap.delete(e),this.map&&!this._getMapWrapper().isDisposed()&&this._getMapWrapper().removeLayerWithSource(e),t.native=null,t.config=null},e.prototype.getContentBounds=function(){if(!this._markerPointsMap.size)return null;var t=new mapboxgl.LngLatBounds;return this._markerPointsMap.forEach(function(e){t.extend(new mapboxgl.LngLat(e.lng,e.lat))}),t},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._markerPointsMap.clear(),this._markerPointsMap=null},e.prototype._addLayer=function(t,e){var n=e.latLng,r=e.img,i=e.anchor,o=e.rotation,a=e.title;if(n&&this._markerPointsMap.set(t,n),n&&r){var u=this._getMapWrapper();u.loadAndAddImage(r,h(r)).subscribe(function(e){u.addLayer(function(t,e,n,r,i,o,a,u){return void 0===r&&(r="center"),void 0===i&&(i={}),void 0===o&&(o=0),void 0===a&&(a=!0),void 0===u&&(u=1),{id:t,type:"symbol",source:{type:"geojson",data:Array.isArray(e[0])?Object(s.points)(e,i):Object(s.point)(e,i)},layout:{"icon-image":n||t,"icon-size":u,"icon-anchor":r,"icon-rotate":o,"icon-allow-overlap":a}}}(t,[n.lng,n.lat],e,i,{title:a},o))})}},e.prototype._getMapWrapper=function(){return this.map},e}(p.a),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nextPolylineId=0,e}return r.c(e,t),e.prototype.addPolyline=function(t){var e=t.encoded,n=t.color,r=t.width,i=t.opacity,o="app-map-polyline-"+this.nextPolylineId++;return this._getMapWrapper().addLayer({id:o,type:"line",paint:{"line-color":n,"line-width":r,"line-opacity":i},layout:{"line-join":"round","line-cap":"round"},source:{type:"geojson",data:c(e)}}),o},e.prototype.setEncoded=function(t,e){if(!this.map)return this;var n=this._getMapWrapper().map.getSource(t);return n&&n.setData(c(e)),this},e.prototype.remove=function(t){this.map&&!this._getMapWrapper().isDisposed()&&this._getMapWrapper().removeLayerWithSource(t)},e.prototype._getMapWrapper=function(){return this.map},e}(n("IXP5").a);n.d(e,"a",function(){return a}),n.d(e,"b",function(){return d}),n.d(e,"c",function(){return m})},t462:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return function(){}}()},wImt:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){this._doAnimationStep=this._doAnimationStep.bind(this)}return t.prototype.startAnimation=function(t,e){void 0===e&&(e=300),this._isAnimationAPISupported()?(this._cancelPreviousAnimation(),this._duration=e,this._startTime=performance.now(),this._animationCallback=t,this._requestAnimationId=requestAnimationFrame(this._doAnimationStep)):t(1)},t.prototype.stopAnimation=function(){this._isAnimationAPISupported()&&this._cancelPreviousAnimation()},t.prototype._isAnimationAPISupported=function(){return"function"==typeof requestAnimationFrame},t.prototype._cancelPreviousAnimation=function(){this._requestAnimationId&&(cancelAnimationFrame(this._requestAnimationId),this._requestAnimationId=null,this._animationCallback=null)},t.prototype._doAnimationStep=function(t){this._animationCallback(1-Math.max(0,this._startTime+this._duration-t)/this._duration),this._startTime+this._duration>t?this._requestAnimationId=requestAnimationFrame(this._doAnimationStep):(this._requestAnimationId=null,this._animationCallback=null)},t}()},x5KB:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a});var r=n("6blF"),i=n("67Y/");function o(t){return r.a.create(function(e){var n=new Image;n.onload=function(){e.next(n),e.complete()},n.onerror=function(t){return e.error(t)},n.src=t})}function a(t,e,n,r){return o(t).pipe(Object(i.a)(function(t){var i=e?e/t.width:1,o=n?Math.min(i,n?n/t.height:1):i,a=document.createElement("canvas");a.width=t.width*o,a.height=t.height*o;var s=a.getContext("2d");if(r){var u=a.width/2,c=a.height/2;s.save(),s.translate(u,c),s.rotate(r*Math.PI/180),s.translate(-u,-c),s.drawImage(t,0,0),s.restore()}else s.drawImage(t,0,0,a.width,a.height);return a}))}},xPra:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("5IrS");function i(t,e,n){return t+(e-t)*n}function o(t,e,n,i,o){if(Object(r.a)(t,e))return e;var a=i.fromLatLngToPoint(t),s=i.fromLatLngToPoint(e);return i.fromPointToLatLng({x:o(a.x,s.x,n),y:o(a.y,s.y,n)})}},xvOT:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n("CcnG"),n("9wFs"),n("IXP5");var r=n("acRK"),i=n("p5j7");function o(t,e){switch(e.getDriverName()){case"google":return new r.c(t);case"mapbox":return new i.c(t);default:throw new Error('Unsuported polyline driver "'+e.getDriverName()+'"')}}}}]);